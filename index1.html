<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° Ê±âËØ≠ÊåëÊàòÔºö'Â∑¶Âè≥' ÊåëÊàò</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;700&family=Noto+Sans+SC:wght@700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* ‡∏™‡∏µ‡πÅ‡∏ö‡∏ö‡∏à‡∏µ‡∏ô‡∏°‡∏á‡∏Ñ‡∏• */
            --chinese-red: #c81d25; /* ‡πÅ‡∏î‡∏á‡πÄ‡∏Ç‡πâ‡∏° */
            --gold-color: #ffc400; /* ‡∏ó‡∏≠‡∏á‡∏™‡∏ß‡πà‡∏≤‡∏á */
            --dark-color: #333333;
            --light-bg: #fefcf5; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡∏Ñ‡∏£‡∏µ‡∏° */
            --success-color: #388e3c; /* ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡∏∂‡πâ‡∏ô */
            --error-color: #d32f2f; /* ‡πÅ‡∏î‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Error */
            --primary-font: 'Noto Sans SC', sans-serif; /* ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏à‡∏µ‡∏ô */
            --secondary-font: 'Kanit', sans-serif; /* ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÑ‡∏ó‡∏¢/UI */
        }
        
        body {
            font-family: var(--secondary-font);
            margin: 0;
            padding: 0;
            background-color: var(--light-bg);
            background-image: linear-gradient(135deg, #fefcf5 0%, #fae6e6 100%);
            color: var(--dark-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background-color: white;
            padding: 50px 40px;
            border-radius: 30px; 
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5); 
            border: 8px solid var(--chinese-red); 
            width: 100%;
            max-width: 900px; 
            margin: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
            outline: 4px solid var(--gold-color);
            outline-offset: -12px;
        }

        /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î‡∏°‡∏á‡∏Ñ‡∏• */
        .container::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><defs><pattern id="dots" width="10" height="10" patternUnits="userSpaceOnUse"><circle cx="1" cy="1" r="0.5" fill="%23f5e0e0" /></pattern></defs><rect width="100%" height="100%" fill="url(%23dots)"/></svg>');
            opacity: 0.6;
            z-index: 0;
            border-radius: 30px;
        }
        .page {
            position: relative;
            z-index: 1; 
            display: none;
            padding: 20px 0;
        }

        .page.active { display: block; }

        h1 {
            color: var(--chinese-red);
            font-size: 3.8em; 
            margin-bottom: 30px;
            font-weight: 900;
            text-shadow: 4px 4px 0px var(--gold-color), 
                        6px 6px 0px rgba(0,0,0,0.1); 
            font-family: var(--primary-font);
        }
        
        h2 {
            color: var(--dark-color);
            font-size: 2.5em;
            margin-bottom: 40px;
            font-weight: 700;
        }

        h3 {
            font-size: 1.5em; 
            color: var(--chinese-red); 
            font-weight: 700;
        }

        /* ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å */
        button {
            padding: 18px 45px; 
            margin: 15px;
            border: 4px solid var(--chinese-red);
            border-radius: 12px; 
            cursor: pointer;
            font-size: 1.5em;
            font-weight: 700;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.25);
            transform: scale(1);
        }

        /* **‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Result ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô** */
        .button-group-row {
            display: flex;
            flex-wrap: wrap; 
            justify-content: center;
            gap: 20px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô */
            margin: 30px 0 10px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô */
        }
        
        /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å 2 ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏£‡∏Å‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô */
        .button-group-row:first-of-type button {
             /* ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å 2 ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏£‡∏Å‡∏î‡∏π‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡∏ç‡πà‡∏û‡∏≠‡∏™‡∏°‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ô‡∏à‡∏≠‡πÉ‡∏´‡∏ç‡πà */
             min-width: 300px; 
        }
        /* *************************************************************** */

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(200, 29, 37, 0.7); }
            70% { box-shadow: 0 0 0 20px rgba(200, 29, 37, 0); }
            100% { box-shadow: 0 0 0 0 rgba(200, 29, 37, 0); }
        }
        @keyframes shake {
            0%, 100% { transform: scale(1); }
            20% { transform: scale(0.97) rotate(-1deg); }
            40% { transform: scale(1.03) rotate(1deg); }
            60% { transform: scale(0.99) rotate(-0.5deg); }
            80% { transform: scale(1.01) rotate(0.5deg); }
        }
        
        .btn-shake {
            animation: shake 0.5s ease-in-out;
        }

        .btn-start { 
            background-color: var(--chinese-red); 
            color: var(--gold-color); 
            border-color: var(--gold-color);
            animation: pulse 1.5s infinite; 
        }
        .btn-start:hover { 
            background-color: #a0171d;
            transform: scale(1.1); 
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
            animation: none; 
        }

        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° ‡∏ñ‡∏π‡∏Å/‡∏ú‡∏¥‡∏î */
        .btn-true, .btn-false { 
            color: white; 
            border-color: #ffffff;
            font-family: var(--primary-font), var(--secondary-font);
            font-size: 2.2em; 
            font-weight: 900;
            padding: 20px 50px; 
            min-width: 200px; 
        }
        .btn-true { background-color: var(--success-color); }
        .btn-false { background-color: var(--error-color); }
        
        .btn-true:hover, .btn-false:hover {
            opacity: 0.9;
            transform: translateY(-5px) scale(1.08); 
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.3);
        }

        /* ‡∏à‡∏±‡∏î‡∏õ‡∏∏‡πà‡∏° True/False ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏ä‡∏¥‡∏î‡∏Å‡∏±‡∏ô */
        #game-page .button-group {
            display: flex;
            justify-content: center;
            gap: 40px; 
            margin-top: 60px;
        }
        
        .btn-action { 
            background-color: var(--gold-color); 
            color: var(--chinese-red);
            border-color: var(--chinese-red);
        }
         .btn-secondary {
            background-color: #f0f0f0;
            color: var(--dark-color);
            border-color: var(--dark-color);
        }
        .btn-secondary:hover {
            background-color: #e0e0e0; 
            transform: translateY(-2px) scale(1.02);
        }
        
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö/‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï (‡∏™‡∏µ‡πÅ‡∏î‡∏á) */
        .btn-danger {
            background-color: var(--error-color); 
            color: white;
            border-color: #fdd8d8;
        }

        .btn-danger:hover {
            background-color: #b71c1c; 
            transform: translateY(-2px) scale(1.02);
        }

        /* ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• */
        input[type="text"] {
            padding: 18px; 
            font-size: 1.6em;
            width: 90%;
            max-width: 500px;
            border: 4px solid var(--chinese-red);
            border-radius: 12px;
            margin-top: 15px;
            transition: all 0.3s;
            text-align: center;
            font-weight: 600;
            font-family: var(--secondary-font);
        }
        input[type="text"]:focus {
            border-color: var(--gold-color);
            box-shadow: 0 0 15px rgba(255, 196, 0, 1), 0 0 8px var(--chinese-red);
            outline: none;
        }

        /* ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Å‡∏° */
        #question-text {
            font-family: var(--primary-font);
            font-size: 5em; 
            line-height: 1.3;
            margin: 40px 0;
            font-weight: 900;
            color: var(--chinese-red);
            padding: 30px;
            background-color: #fff8e1; 
            border-radius: 20px;
            border: 4px solid var(--gold-color);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15); 
        }
        
        /* ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ */
        #final-score {
            font-size: 8em; 
            color: var(--gold-color);
            text-shadow: 5px 5px 0px var(--chinese-red), 8px 8px 0px rgba(0, 0, 0, 0.1);
            margin: 30px 0 15px;
            font-weight: 900;
            line-height: 1;
        }
        
        #player-rank {
            font-size: 2.2em;
            color: var(--chinese-red);
            margin-bottom: 50px;
            font-weight: 700;
            text-shadow: 1px 1px 0 #fff;
        }

        /* Leaderboard */
        #leaderboard-list {
            list-style: none;
            padding: 0;
            margin: 30px auto;
            max-width: 600px;
            background-color: #fff9e6;
            border-radius: 15px;
            padding: 20px;
            border: 4px solid var(--gold-color);
            box-shadow: inset 0 0 15px rgba(255, 196, 0, 0.4);
        }
        
        #leaderboard-list li {
            padding: 15px 20px;
            border-bottom: 1px dashed #ffd54f;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            font-size: 1.3em;
        }
        
        #leaderboard-list li:first-child {
            font-weight: 900;
            color: white; 
            background-color: var(--chinese-red); 
            border-radius: 10px 10px 0 0;
            border-bottom: 2px solid var(--gold-color);
            font-size: 1.4em;
        }
        #leaderboard-list li:nth-child(2) { 
            background-color: #ffeadb;
            color: var(--chinese-red);
            font-size: 1.4em;
            border: 2px solid var(--gold-color);
            border-radius: 5px;
            margin-top: 5px;
        }

        /* ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏â‡∏•‡∏¢ */
        #answer-content {
            max-height: 500px;
            overflow-y: auto; 
            border: 3px solid var(--gold-color);
            background-color: #ffffff;
            padding: 25px;
            border-radius: 15px;
            text-align: left;
            box-shadow: inset 0 0 12px rgba(0, 0, 0, 0.15);
        }
        .answer-item {
            margin-bottom: 30px;
            padding: 20px;
            border-left: 10px solid var(--chinese-red); 
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
        }
        .answer-item:hover {
            background-color: #fffbf5;
            transform: translateX(8px);
        }
        .answer-q { font-weight: 700; font-size: 1.5em; color: var(--chinese-red); font-family: var(--primary-font); }
        .answer-exp { font-size: 1.2em; color: var(--dark-color); margin-left: 10px; margin-top: 10px;}
        
        /* ‡∏ü‡∏µ‡∏î‡πÅ‡∏ö‡πá‡∏Å Popup */
        .feedback {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.6); 
            padding: 35px 70px;
            border-radius: 25px;
            font-size: 5em; 
            font-weight: 900;
            color: white;
            z-index: 1000;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); 
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.7);
            font-family: var(--primary-font), var(--secondary-font); /* ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ü‡∏≠‡∏ô‡∏ï‡πå */
        }
        .feedback.correct { background-color: rgba(56, 142, 60, 0.98); }
        .feedback.incorrect { background-color: rgba(211, 47, 47, 0.98); }
        .feedback.show { 
            opacity: 1; 
            transform: translate(-50%, -50%) scale(1.1); 
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 30px 20px;
                border: 6px solid var(--chinese-red);
                outline-offset: -8px;
            }
            h1 {
                font-size: 2.8em;
                text-shadow: 3px 3px 0px var(--gold-color);
            }
            h2 {
                font-size: 1.8em;
            }
            button {
                padding: 15px 30px;
                font-size: 1.2em;
                width: auto;
                margin: 10px;
            }
            
            /* ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Result ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡πÅ‡∏ñ‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô (‡πÅ‡∏ö‡πà‡∏á 2 ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏ñ‡∏ß) ‡πÉ‡∏ô‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å */
            #result-page .button-group-row button {
                width: 45%; 
                margin: 5px;
            }
            #result-page .button-group-row:first-of-type button {
                /* ‡∏•‡∏ö min-width ‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏≠‡∏≠‡∏Å */
                min-width: unset; 
            }
        }
        
    </style>
</head>
<body>

<audio id="audio-start" src="sounds/start.mp3" preload="auto"></audio>
<audio id="audio-correct" src="sounds/correct.mp3" preload="auto"></audio>
<audio id="audio-incorrect" src="sounds/incorrect.mp3" preload="auto"></audio>
<audio id="audio-finish" src="sounds/finish.mp3" preload="auto"></audio>

<div class="container">
    
    <div id="welcome-page" class="page active">
        <h1>üßß 'Â∑¶Âè≥' Ê±âËØ≠ÊåëÊàòËµõ üßß</h1>
        <h2>‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏™‡∏ô‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏•‡∏≠‡∏á‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô!</h2>
        <p style="font-size: 1.8em; margin: 40px 0; font-weight: 600;">
            ‡∏£‡πà‡∏ß‡∏°‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ **'Â∑¶Âè≥'** (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì, ‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏ß‡∏≤) ‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ï‡πà‡∏≤‡∏á ‡πÜ
        </p>
        <button class="btn-start" onclick="goToPage('name-input-page')">
            ÊåëÊàòÂºÄÂßã (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢) üöÄ
        </button>
    </div>

    <div id="name-input-page" class="page">
        <h1>‚úçÔ∏è Â°´ÂÜôÊÇ®ÁöÑÂêçÂ≠ó ‚úçÔ∏è</h1>
        <p style="font-size: 1.6em; margin: 30px 0;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</p>
        <div>
            <input type="text" id="player-name-input" placeholder="‰æãÂ¶Ç: Ê±âËØ≠Ëææ‰∫∫" maxlength="20">
        </div>
        <button class="btn-action" style="margin-top: 40px;" onclick="startGame()">
            ÂºÄÂßãÊ∏∏Êàè (‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°)! üéÆ
        </button>
    </div>

    <div id="game-page" class="page">
        <h3 id="game-info">ÈÄâÊâã: [‡∏ä‡∏∑‡πà‡∏≠] | ÂæóÂàÜ: 0/0</h3>
        <p style="font-size: 2em; margin-bottom: 30px; font-weight: 600;">‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ 'Â∑¶Âè≥' ‡πÑ‡∏î‡πâ **‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°** ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</p>
        <p id="question-text">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏à‡∏∞‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...</p>
        
        <div class="button-group">
            <button id="btn-true" class="btn-true" onclick="checkAnswer(true, this)">
                ‚úÖ <strong>ÂØπ ‡∏ñ‡∏π‡∏Å</strong>
            </button>
            <button id="btn-false" class="btn-false" onclick="checkAnswer(false, this)">
                ‚ùå <strong>Èîô ‡∏ú‡∏¥‡∏î</strong>
            </button>
        </div>
    </div>

    <div id="result-page" class="page">
        <h1>üéâ ÊåëÊàòÁªìÊûú üéâ</h1>
        
        <h2 id="result-message"></h2>
        <p id="final-score">0/0</p>
        <p id="player-rank">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>

        <ul id="leaderboard-list">
            <li><span>ü•á ÊéíË°åÊ¶ú (Top 5)</span><span>ÂæóÂàÜ</span></li>
            </ul>
        
        <div class="button-group-row"> 
            <button class="btn-action" onclick="goToPage('answer-page')">
                üìú ‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (Êü•ÁúãÁ≠îÊ°à)
            </button>
            <button class="btn-secondary" style="background-color: #ffd13e; color: var(--chinese-red); border-color: var(--chinese-red);" onclick="goToPage('welcome-page')">
                üè† ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö (ËøîÂõûÈ¶ñÈ°µ)
            </button>
        </div>
        <div class="button-group-row">
            <button class="btn-secondary" onclick="goToPage('name-input-page')">
                üîÑ ‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (ÂÜçÊù•‰∏ÄÊ¨°)
            </button>
            <button id="btn-reset-data" class="btn-danger" onclick="resetLeaderboard()">
                üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö (Ê∏ÖÁ©∫Êï∞ÊçÆ)
            </button>
        </div>
        
    </div>

    <div id="answer-page" class="page">
        <h1>üí° Á≠îÊ°àËß£Êûê üí°</h1>
        
        <div id="answer-content">
            </div>

        <button class="btn-secondary" style="margin-top: 40px;" onclick="goToPage('result-page')">
            ‚¨ÖÔ∏è ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ (ËøîÂõûÁªìÊûú)
        </button>
    </div>

</div>

<div id="feedback-popup" class="feedback"></div>

<script>
    // --------------------------------------------------
    // ** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå (JSONbin.io) **
    // **************************************************
    // !!! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì !!!
    // ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô ‡∏à‡∏∞‡πÉ‡∏ä‡πâ Local Storage ‡πÅ‡∏ó‡∏ô
    const JSONBIN_ID = "YOUR_JSONBIN_ID_HERE"; 
    const API_KEY = "YOUR_SECRET_API_KEY_HERE"; 
    const JSONBIN_URL = `https://api.jsonbin.io/v3/b/${JSONBIN_ID}`;
    // **************************************************
    // --------------------------------------------------

    let playerName = "";
    let score = 0;
    let currentQuestionIndex = 0;
    let playerHistory = []; 
    
    // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°: [‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ, ‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á True/False, ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏â‡∏•‡∏¢]
    const questions = [
        ["‰∏ÄÁôæÂùóÂ∑¶Âè≥„ÄÇ", true, "‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: Â∑¶Âè≥ (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì) ‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ '‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì' (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 100 ‡∏´‡∏¢‡∏ß‡∏ô)"],
        ["Â∑¶Âè≥‰ªñÊù•‰∫Ü„ÄÇ", false, "‡∏ú‡∏¥‡∏î: Â∑¶Âè≥ ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏£‡∏¥‡∏¢‡∏≤‡πÉ‡∏ô‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏ô‡∏µ‡πâ ‡∏°‡∏±‡∏Å‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô/‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì"],
        ["Â•πÂæàÈ´òÂ∑¶Âè≥„ÄÇ", false, "‡∏ú‡∏¥‡∏î: Â∑¶Âè≥ ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏Ñ‡∏∏‡∏ì‡∏®‡∏±‡∏û‡∏ó‡πå (‡∏™‡∏π‡∏á, ‡∏™‡∏ß‡∏¢, ‡∏î‡∏µ) ‡∏°‡∏±‡∏Å‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô/‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô"],
        ["‰∫îÂùóÈí±Â∑¶Âè≥„ÄÇ", true, "‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: ‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏á‡∏¥‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ '‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 5 ‡∏´‡∏¢‡∏ß‡∏ô'"],
        ["‰ªñÂæàÊ£íÂ∑¶Âè≥„ÄÇ", false, "‡∏ú‡∏¥‡∏î: Â∑¶Âè≥ ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏Ñ‡∏∏‡∏ì‡∏®‡∏±‡∏û‡∏ó‡πå (‡πÄ‡∏à‡πã‡∏á, ‡∏î‡∏µ) ‡∏°‡∏±‡∏Å‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô/‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì"],
        ["‰∫åÂçÅ‰∏™‰∫∫Â∑¶Âè≥„ÄÇ", true, "‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: ‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÅ‡∏•‡∏∞‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏ô‡∏≤‡∏° ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ '‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 20 ‡∏Ñ‡∏ô'"],
        ["Ëøô‰ª∂Ë°£Êúç‰∏§ÁôæÂùóÂ∑¶Âè≥„ÄÇ", true, "‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: ‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡πà‡∏ß‡∏¢ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ '‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 200 ‡∏´‡∏¢‡∏ß‡∏ô'"],
    ];
    let shuffledQuestions = [];
    const feedbackPopup = document.getElementById('feedback-popup');
    const audioStart = document.getElementById('audio-start');
    const audioCorrect = document.getElementById('audio-correct');
    const audioIncorrect = document.getElementById('audio-incorrect');
    const audioFinish = document.getElementById('audio-finish');

    // =======================================================
    // ** SOUND & HAPTIC FUNCTIONS **
    // =======================================================
    function playSound(audioElement) {
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà placeholder
        const isPlaceholder = audioElement && audioElement.src && (audioElement.src.includes('sounds/') || audioElement.src.includes('YOUR_'));
        
        if (isPlaceholder) {
             // console.log(`Audio placeholder or missing file is in use for ${audioElement.id}.`);
             return;
        }
        
        if (audioElement) { 
            audioElement.currentTime = 0; 
            audioElement.play().catch(e => {
                // console.log(`Audio playback failed for ${audioElement.id}. User interaction may be required:`, e);
            });
        }
    }

    function triggerHapticFeedback(isCorrect) {
        if (navigator.vibrate) {
            if (isCorrect) {
                navigator.vibrate(100); 
            } else {
                navigator.vibrate([100, 50, 100]); 
            }
        }
    }


    // =======================================================
    // ** ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå (JSONbin) FUNCTIONS **
    // =======================================================
    const useLocalStorage = (JSONBIN_ID === "YOUR_JSONBIN_ID_HERE" || API_KEY === "YOUR_SECRET_API_KEY_HERE");

    async function fetchLeaderboard() {
        if (useLocalStorage) {
            // console.warn("JSONBIN/API KEY NOT SET. Using local storage for leaderboard.");
            playerHistory = JSON.parse(localStorage.getItem('localLeaderboard')) || [];
            return;
        }
        
        try {
            const response = await fetch(JSONBIN_URL, {
                method: 'GET',
                headers: { 'X-Master-Key': API_KEY, 'Content-Type': 'application/json' }
            });
            const data = await response.json();
            if (data && data.record && Array.isArray(data.record)) {
                playerHistory = data.record;
            } else {
                playerHistory = []; 
            }
        } catch (error) {
            console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Leaderboard:", error);
            playerHistory = JSON.parse(localStorage.getItem('localLeaderboard')) || []; // Fallback to local
        }
    }

    async function saveLeaderboard(newHistory) {
        if (useLocalStorage) {
            // console.warn("JSONBIN/API KEY NOT SET. Saving to local storage only.");
            localStorage.setItem('localLeaderboard', JSON.stringify(newHistory));
            return true;
        }

        try {
            const response = await fetch(JSONBIN_URL, {
                method: 'PUT', 
                headers: { 'X-Master-Key': API_KEY, 'Content-Type': 'application/json' },
                body: JSON.stringify(newHistory)
            });
            await response.json();
            return true;
        } catch (error) {
            console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Leaderboard:", error);
            return false;
        }
    }

    async function resetLeaderboard() {
        if (!confirm("‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ!")) {
            return;
        }

        if (useLocalStorage) {
            // Fallback to local storage reset
            localStorage.removeItem('localLeaderboard');
            alert("‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Local Storage ‡∏ñ‡∏π‡∏Å‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß!");
            playerHistory = [];
            showResult(false); // Reload result page without saving
            return;
        }

        try {
            const response = await fetch(JSONBIN_URL, {
                method: 'PUT', // ‡πÉ‡∏ä‡πâ PUT ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏î‡πâ‡∏ß‡∏¢‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå‡∏ß‡πà‡∏≤‡∏á
                headers: { 'X-Master-Key': API_KEY, 'Content-Type': 'application/json' },
                body: JSON.stringify([])
            });
            
            if (response.ok) {
                alert("‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ñ‡∏π‡∏Å‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!");
                playerHistory = [];
                showResult(false); // ‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤
            } else {
                alert("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•! ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö API Key");
            }
        } catch (error) {
            console.error("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï Leaderboard:", error);
            alert("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•!");
        }
    }

    // =======================================================
    // ** GAME FLOW FUNCTIONS **
    // =======================================================

    function showFeedback(isCorrect) {
        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Feedback Popup ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
        feedbackPopup.innerText = isCorrect ? "‚úÖ ÂØπ ‡∏ñ‡∏π‡∏Å!" : "‚ùå Èîô ‡∏ú‡∏¥‡∏î!";
            
        feedbackPopup.className = `feedback ${isCorrect ? 'correct' : 'incorrect'} show`;
        
        setTimeout(() => {
            feedbackPopup.classList.remove('show');
            currentQuestionIndex++;
            updateGamePage();
        }, isCorrect ? 900 : 1200); 
    }

    function goToPage(pageId) {
        document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active');
        });
        document.getElementById(pageId).classList.add('active');
    }

    async function startGame() {
        let inputName = document.getElementById('player-name-input').value.trim();
        if (inputName === "") {
            playerName = "ÂåøÂêçÁé©ÂÆ∂ (‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ô‡∏¥‡∏£‡∏ô‡∏≤‡∏°)"; 
            document.getElementById('player-name-input').value = playerName; // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï input field
        } else {
            playerName = inputName;
        }
        
        playSound(audioStart); 

        // ‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏∂‡∏á‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏™‡∏°‡∏≠
        await fetchLeaderboard();
        
        score = 0;
        currentQuestionIndex = 0;
        
        // ‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
        shuffledQuestions = [...questions];
        shuffledQuestions.sort(() => Math.random() - 0.5);

        updateGamePage();
        goToPage('game-page');
    }

    function updateGamePage() {
        if (currentQuestionIndex < shuffledQuestions.length) {
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            
            document.getElementById('game-info').innerText = 
                `ÈÄâÊâã: ${playerName} | ÂæóÂàÜ: ${score} | Á¨¨ ${currentQuestionIndex + 1} È¢ò / ${shuffledQuestions.length}`;
            
            document.getElementById('question-text').innerText = currentQuestion[0];
        } else {
            playSound(audioFinish); 
            showResult(true);
        }
    }

    function checkAnswer(userAnswer, buttonElement) {
        if (feedbackPopup.classList.contains('show')) return; 

        // 1. ‡πÄ‡∏û‡∏¥‡πà‡∏° Effect ‡∏™‡∏±‡πà‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î
        buttonElement.classList.add('btn-shake');
        setTimeout(() => {
            buttonElement.classList.remove('btn-shake');
        }, 500);
        
        const correct = shuffledQuestions[currentQuestionIndex][1];
        let isCorrect = (userAnswer === correct);
        
        if (isCorrect) {
            score++;
            playSound(audioCorrect); 
        } else {
            playSound(audioIncorrect); 
        }
        triggerHapticFeedback(isCorrect);

        showFeedback(isCorrect); 
    }

    async function showResult(shouldSave = true) {
        const total = questions.length;
        
        let rank = "N/A";
        
        if (shouldSave) {
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
            await savePlayerScoreOnline();
        } else {
            // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (‡πÄ‡∏ä‡πà‡∏ô ‡∏ï‡∏≠‡∏ô‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï) ‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á
            await fetchLeaderboard();
        }
        
        // ‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö
        playerHistory.sort((a, b) => b.score - a.score);
        
        let foundIndex = -1;
        if (shouldSave) {
             // ‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô playerHistory ‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß
            foundIndex = playerHistory.findIndex(item => item.name === playerName && item.score === score);
            if(foundIndex !== -1) {
                rank = foundIndex + 1;
            }
        }
        
        const rankText = shouldSave && foundIndex !== -1 ? 
            `ÊÇ®ÁöÑÊéíÂêçÊòØ: Á¨¨ ${rank} ‰Ωç (ÊÄªÊåëÊàò ${playerHistory.length} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)` : 
            `‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö... (‡∏°‡∏µ ${playerHistory.length} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)`;

        const resultMessage = (score / total) >= 0.8 ? 
              `ÊÅ≠Âñú ${playerName} ÊåëÊàòÊàêÂäü! ÊÇ®ÊòØËØ≠Ë®ÄÂ§ßÂ∏à! ü§©` : 
              `ÂÜçÊé•ÂÜçÂéâ ${playerName}ÔºåÁªßÁª≠Âä™Âäõ! üí™`;

        document.getElementById('result-message').innerText = resultMessage;
        document.getElementById('final-score').innerText = `${score}/${total}`;
        document.getElementById('player-rank').innerText = rankText;
            
        const lbList = document.getElementById('leaderboard-list');
        lbList.innerHTML = '<li><span>ü•á ÊéíË°åÊ¶ú (Top 5)</span><span>ÂæóÂàÜ</span></li>';
        
        playerHistory.slice(0, 5).forEach((item, index) => {
            const li = document.createElement('li');
            li.innerHTML = `
                <span>#${index + 1}: ${item.name}</span>
                <span>${item.score}</span>
            `;
            // Highlight ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ô Leaderboard 
            if (shouldSave && item.name === playerName && item.score === score && index === foundIndex) {
                 li.style.backgroundColor = '#FFFDE7'; 
                 li.style.fontWeight = '700';
            }
            lbList.appendChild(li);
        });

        createAnswerContent();
        goToPage('result-page');
    }

    async function savePlayerScoreOnline() {
        // ‡∏î‡∏∂‡∏á‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
        await fetchLeaderboard(); 
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏´‡∏°‡πà
        playerHistory.push({ name: playerName, score: score, timestamp: new Date().toISOString() });
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏•‡∏±‡∏ö
        await saveLeaderboard(playerHistory);
    }

    function createAnswerContent() {
        const contentDiv = document.getElementById('answer-content');
        contentDiv.innerHTML = ''; 

        questions.forEach((q, index) => {
            const [questionText, isCorrect, explanation] = q;
            // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏â‡∏•‡∏¢‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÉ‡∏ä‡πâ (‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°) / (‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢
            const result = isCorrect ? '‚úÖ ÂØπ (‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°)' : '‚ùå Èîô (‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°)'; 

            const item = document.createElement('div');
            item.className = 'answer-item';
            item.innerHTML = `
                <div class="answer-q">Á¨¨ ${index + 1} È¢ò: ${questionText}</div>
                <div class="answer-exp"><strong>‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á:</strong> ${result}</div>
                <div class="answer-exp"><strong>Ëß£Êûê (‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢):</strong> ${explanation}</div>
            `;
            contentDiv.appendChild(item);
        });
    }

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ DOM ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
    document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('player-name-input').value = ""; // Clear input on load
        fetchLeaderboard(); // ‡∏î‡∏∂‡∏á‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ß‡πâ
        createAnswerContent(); // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÄ‡∏â‡∏•‡∏¢
        goToPage('welcome-page');
    });

</script>

</body>
</html>